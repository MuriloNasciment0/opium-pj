function iniciarRanking() {
    document.getElementById("conteudoPrincipal").style.display = "none"
    document.getElementById("rankingAlbum1").style.display = "flex"
}

function cancelarRanking() {
    document.getElementById("conteudoPrincipal").style.display = "flex"
    document.getElementById("rankingAlbum1").style.display = "none"
}

function voltarRanking() {
    document.getElementById("rankingAlbum1").style.display = "flex"
    document.getElementById("rankingAlbum2").style.display = "none"
}

function voltarRanking1() {
    document.getElementById("rankingAlbum2").style.display = "flex"
    document.getElementById("rankingAlbum3").style.display = "none"
}

function proximoAlbum() {
    document.getElementById("rankingAlbum2").style.display = "flex"
    document.getElementById("rankingAlbum1").style.display = "none"
}

function proximoAlbum1() {
    document.getElementById("rankingAlbum3").style.display = "flex"
    document.getElementById("rankingAlbum2").style.display = "none"
}

function voltarRanking2() {
    document.getElementById("rankingAlbum3").style.display = "flex"
    document.getElementById("rankingAlbum4").style.display = "none"
}

function proximoAlbum2() {
    document.getElementById("rankingAlbum4").style.display = "flex"
    document.getElementById("rankingAlbum3").style.display = "none"
}

function voltarRanking3() {
    document.getElementById("rankingAlbum3").style.display = "flex"
    document.getElementById("rankingAlbum4").style.display = "none"
}

function proximoAlbum3() {
    document.getElementById("rankingAlbum5").style.display = "flex"
    document.getElementById("rankingAlbum4").style.display = "none"
}

function voltarRanking4() {
    document.getElementById("rankingAlbum4").style.display = "flex"
    document.getElementById("rankingAlbum5").style.display = "none"
}

function proximoAlbum4() {
    document.getElementById("rankingAlbum6").style.display = "flex"
    document.getElementById("rankingAlbum5").style.display = "none"
}

function voltarRanking5() {
    document.getElementById("rankingAlbum5").style.display = "flex"
    document.getElementById("rankingAlbum6").style.display = "none"
}

function proximoAlbum5() {
    document.getElementById("rankingAlbum7").style.display = "flex"
    document.getElementById("rankingAlbum6").style.display = "none"
}

function voltarRanking6() {
    document.getElementById("rankingAlbum6").style.display = "flex"
    document.getElementById("rankingAlbum7").style.display = "none"
}

function proximoAlbum6() {
    document.getElementById("rankingAlbum8").style.display = "flex"
    document.getElementById("rankingAlbum7").style.display = "none"
}

function voltarRanking7() {
    document.getElementById("rankingAlbum7").style.display = "flex"
    document.getElementById("rankingAlbum8").style.display = "none"
}

function proximoAlbum7() {
    document.getElementById("rankingAlbum9").style.display = "flex"
    document.getElementById("rankingAlbum8").style.display = "none"
}

function voltarRanking8() {
    document.getElementById("rankingAlbum8").style.display = "flex"
    document.getElementById("rankingAlbum9").style.display = "none"
}

function proximoAlbum8() {
    document.getElementById("rankingAlbum10").style.display = "flex"
    document.getElementById("rankingAlbum9").style.display = "none"
}

function voltarRanking9() {
    document.getElementById("rankingAlbum9").style.display = "flex"
    document.getElementById("rankingAlbum10").style.display = "none"
}

function proximoAlbum9() {
    document.getElementById("rankingAlbum11").style.display = "flex"
    document.getElementById("rankingAlbum10").style.display = "none"
}

function voltarRanking10() {
    document.getElementById("rankingAlbum10").style.display = "flex"
    document.getElementById("rankingAlbum11").style.display = "none"
}

function proximoAlbum10() {
    document.getElementById("rankingAlbum12").style.display = "flex"
    document.getElementById("rankingAlbum11").style.display = "none"
}

function voltarRanking11() {
    document.getElementById("rankingAlbum11").style.display = "flex"
    document.getElementById("rankingAlbum12").style.display = "none"
}

function proximoAlbum11() {
    document.getElementById("rankingAlbum13").style.display = "flex"
    document.getElementById("rankingAlbum12").style.display = "none"
}

function voltarRanking12() {
    document.getElementById("rankingAlbum12").style.display = "flex"
    document.getElementById("rankingAlbum13").style.display = "none"
}

function proximoAlbum12() {
    document.getElementById("rankingAlbum14").style.display = "flex"
    document.getElementById("rankingAlbum13").style.display = "none"
}

function voltarRanking13() {
    document.getElementById("rankingAlbum13").style.display = "flex"
    document.getElementById("rankingAlbum14").style.display = "none"
}

function proximoAlbum13() {
    document.getElementById("rankingAlbum15").style.display = "flex"
    document.getElementById("rankingAlbum14").style.display = "none"
}

function voltarRanking14() {
    document.getElementById("rankingAlbum14").style.display = "flex"
    document.getElementById("rankingAlbum15").style.display = "none"
}

function proximoAlbum14() {
    document.getElementById("rankingAlbum16").style.display = "flex"
    document.getElementById("rankingAlbum15").style.display = "none"
}

function voltarRanking15() {
    document.getElementById("rankingAlbum15").style.display = "flex"
    document.getElementById("rankingAlbum16").style.display = "none"
}

function proximoAlbum15() {
    document.getElementById("rankingAlbum17").style.display = "flex"
    document.getElementById("rankingAlbum16").style.display = "none"
}

function voltarRanking16() {
    document.getElementById("rankingAlbum16").style.display = "flex"
    document.getElementById("rankingAlbum17").style.display = "none"
}

function proximoAlbum16() {
    document.getElementById("rankingAlbum18").style.display = "flex"
    document.getElementById("rankingAlbum17").style.display = "none"
}

function voltarRanking17() {
    document.getElementById("rankingAlbum17").style.display = "flex"
    document.getElementById("rankingAlbum18").style.display = "none"
}

function proximoAlbum17() {
    document.getElementById("rankingAlbum19").style.display = "flex"
    document.getElementById("rankingAlbum18").style.display = "none"
}

function voltarRanking18() {
    document.getElementById("rankingAlbum18").style.display = "flex"
    document.getElementById("rankingAlbum19").style.display = "none"
}

function certezafinalizarRanking() {
    document.getElementById("fundoModal").style.display = "flex"
}

function finalizarRanking() {
    document.getElementById("fundoModal").style.display = "none"
    document.getElementById("rankingAlbum19").style.display = "none"
}

function voltarPaginaInicial() {
    document.getElementById("conteudoPrincipal").style.display = "flex"
}


function voltarParaRanking() {
    document.getElementById("rankingAlbum19").style.display = "flex"
    document.getElementById("fundoModal").style.display = "none"
}

var fkUsuarioVar = sessionStorage.ID_USUARIO;
console.log("ID_USUARIO da sessionStorage: ", fkUsuarioVar);


var idUsuarioVar = sessionStorage.ID_USUARIO;
nomeUsuario.innerHTML = sessionStorage.NOME_USUARIO;
var escolhasAvaliacao = []

const btnEnviar = document.getElementById('btnEnviar');


function inserirVotoUsuario() {
    try {
        for (var contadorVotos = 1; 
            contadorVotos <= 19; 
            contadorVotos++) {
            escolhas = document.querySelector(`input[name="avaliacaoAlbum${contadorVotos}"]:checked`).value;
            escolhasAvaliacao.push(escolhas)
        }

        for (var contadorAvaliacao = 1; 
            contadorAvaliacao <= 19; 
            contadorAvaliacao++) {
            var avaliacaoAlbum = escolhasAvaliacao[contadorAvaliacao - 1];
            var albumVar = contadorAvaliacao
            enviarAvaliacao(idUsuarioVar, albumVar, avaliacaoAlbum);
        }

        finalizarRanking();
        setTimeout(() => {
            window.location = "dashboard.html";
        }, 1000)
        return true;
    } catch (error) {
        alert('Você não votou em todos os albums!')
    }
}

async function enviarAvaliacao(id, album, avaliacao) {
    await fetch("/votoUsuario/inserirVotoUsuario", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            idUsuarioServer: id,
            albumServer: album,
            avaliacaoAlbumServer: avaliacao
        })
    }).then(function (resposta) {

        console.log("resposta: ", resposta);

        if (resposta.ok) {
            console.log(resposta)
        } else {
            throw ("Deu erro ao inserir os votos do usuário");
        }
    }).catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
    })
}